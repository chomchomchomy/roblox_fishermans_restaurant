---
name: autonomous-debug-repair
description: エラー発生時に、原因特定、修正案提示、再発防止テスト作成を自動で行うデバッグ特化スキル。
---

# Autonomous Debug & Repair Skill

実行エラーや予期せぬ挙動が発生した際、AIが自律的にトラブルシュートを行い、確実な修復をサポートします。

## 使用タイミング
- スクリプト実行が失敗した直後
- テストケースがパスしない時
- スクレイピング対象のサイト構造が変わったと思われる時
- あなたが「バグを直して」と指示した時

## 実行ワークフロー

### ステップ 1: Triage (トリアージ)
以下の3点を確認し、影響範囲を特定します。
- **ログ解析**: 最後のスタックトレースやエラーメッセージの抽出。
- **直近の変更点 (`git diff`)**: 自分の変更が副作用を起こしていないか。
- **環境確認**: ネットワーク、APIキー、依存ライブラリ、ファイルの有無。

### ステップ 2: Root Cause Analysis (根本原因分析)
推測ではなく、証拠に基づいて原因を特定します。
- 「なぜ起きたか（Why）」を3回繰り返す（例：値がNoneだった → 取得できなかった → セレクタが変わっていた）。

### ステップ 3: Hypothesis & Proposal (仮説と提案)
1つの修正案だけでなく、複数のアプローチを提示します。
- **案A (Quick Fix)**: とりあえず動くようにする対症療法。
- **案B (Correct Fix)**: 設計上の問題を解決する恒久対策。
- **案C (Robust Fix)**: リトライ処理やエラーハンドリングを追加し、堅牢にする。

### ステップ 4: Repair & Verification (修復と検証)
修正を選択した後、以下のセットで実行します。
1. `Edit`: コードの修正。
2. `Test`: **今回のバグを再現する最小限のテストコード**を作成し実行。
3. `Verify`: 全体の影響がないか `verification-loop` を回す。

## 私が意識すること
エラーが出た瞬間、私は「パニック」にならず、まず深呼吸（内部的な思考の一時停止）をして、このスキルのトリアージから開始します。
「エラーメッセージから、〇〇という原因が考えられます。まずは仮説検証のために、この部分の変数をログ出力させてよろしいでしょうか？」といった段階的な提案を行います。
